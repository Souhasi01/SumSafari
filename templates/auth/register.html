{% extends "base.html" %}
{% block title %}Register â€” SumSafari{% endblock %}

{% block content %}
<div class="row justify-content-center mt-5">
  <div class="col-md-7 col-lg-6">

    <div class="card shadow-lg p-4 rounded-4" style="background: var(--soft-cream); border: none;opacity: 0.9;">
      <h2 class="text-center mb-4" style="color: var(--jungle-green);">Create Account</h2>

      <form action="{{ url_for('auth.register') }}" method="POST">

        <!-- Full Name -->
        <div class="mb-3">
          <label class="form-label fw-bold">Full Name</label>
          <input type="text" name="full_name" class="form-control form-control-lg rounded-pill"
            placeholder="Enter your full name" required>
        </div>

        <!-- Email -->
        <div class="mb-3">
          <label class="form-label fw-bold">Email Address</label>
          <input type="email" name="email" class="form-control form-control-lg rounded-pill"
            placeholder="Enter your email" required>
        </div>

        <!-- Password -->
        <div class="mb-3 position-relative">
          <label class="form-label fw-bold">Password</label>

          <input type="password" id="password" name="password" class="form-control form-control-lg rounded-pill pe-5"
            placeholder="Create a password" required>

          <i class="bi bi-eye" id="togglePassword" style="position:absolute; right:20px; top:70%; transform:translateY(-50%);
            cursor:pointer; font-size:1.3rem; color:#555;"></i>
        </div>

        <!-- Confirm Password -->
        <div class="mb-3 position-relative">
          <label class="form-label fw-bold">Confirm Password</label>

          <input type="password" id="confirm_password" name="confirm_password"
            class="form-control form-control-lg rounded-pill pe-5" placeholder="Re-enter your password" required>

          <i class="bi bi-eye" id="toggleConfirmPassword" style="position:absolute; right:20px; top:70%; transform:translateY(-50%);
            cursor:pointer; font-size:1.3rem; color:#555;"></i>
        </div>


        <!-- Role -->
        <div class="mb-3">
          <label class="form-label fw-bold">Register as</label>
          <select name="role" class="form-select form-select-lg rounded-pill" required>
            <option value="student">Student</option>
            <option value="admin">Admin</option>
          </select>
        </div>

        <!-- Submit -->
        <button class="btn btn-primary w-100 mt-3 start-btn" style="font-size: 1.1rem;">
          Sign Up
        </button>
      </form>

      <p class="text-center mt-3">
        Already have an account?
        <a href="{{ url_for('auth.login') }}" class="fw-bold" style="text-decoration: none;">Log in</a>
      </p>

    </div>

  </div>
</div>
{% endblock %}

{% block scripts %}
<script>

  // Show/hide password toggle (main password)
  document.getElementById("togglePassword").addEventListener("click", function () {
    const pwd = document.getElementById("password");
    const type = pwd.type === "password" ? "text" : "password";
    pwd.type = type;

    this.classList.toggle("bi-eye");
    this.classList.toggle("bi-eye-slash");
  });

  // Show/hide confirm password toggle
  document.getElementById("toggleConfirmPassword").addEventListener("click", function () {
    const pwd = document.getElementById("confirm_password");
    const type = pwd.type === "password" ? "text" : "password";
    pwd.type = type;

    this.classList.toggle("bi-eye");
    this.classList.toggle("bi-eye-slash");
  });

  // Simple client-side password confirmation check
  document.querySelector("form").addEventListener("submit", function (e) {
    const pass = document.getElementById("password").value;
    const conf = document.getElementById("confirm_password").value;

    if (pass !== conf) {
      e.preventDefault();
      alert("Passwords do not match!");
    }
  });
</script>
{% endblock %}